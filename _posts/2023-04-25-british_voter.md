---
layout: post
title:  Building a British Voter 
date:   2023-04-25
categories: machine learning, voting behaviour, UK
---

A few years ago the Economist released an article about forecasting American voting behaviour (link [here](https://www.economist.com/graphic-detail/2018/11/03/how-to-forecast-an-americans-vote)). As part of the article they built a statistical model of American voting behaviour and included a web app where you can input demographic characteristics (race, age, religion, etc.) and see the model's predicted probabilities of supporting Democrats and Republicans. For a while I've been wanting to do a similar thing for the UK. The challenge is that it's considerably more difficult to predict vote choice in the UK, where there are multiple electorally viable parties, than in the US, where there are essentially only two viable parties. Nonetheless, I've finally got around to making the model (with some much appreciated help from [John Handley](https://www.twitter.com/jwhandley17)). You can play with it yourself [here](https://web-production-4f82.up.railway.app/). You enter various demographic characteristics of a British voter and the page outputs the probability that voter would have supported one of six parties: Reform UK, the Conservatives, the Greens, Labour, Liberal Democrats, and the Scottish National Party (SNP). 

I decided to do a brief write up of how the model works and how well it performs, as well as some brief results on what the most important predictors of support are for each of these parties. 

## The Model

The Economist did not describe how they constructed their model so I simply proceeded in the way that I thought was most sensible. A note here: I'm a data science student and I've got a decent amount of experience with stats, but I'm still basically a newbie. If you notice anything that you think could improve the model, please let me know! Also, if you're familiar with building statistical/machine learning models, feel free to skip the intuition section, it just describes the intuition for how we can model vote choice on the basis of demographics.

### Intuition

The goal is to get the predicted probability that a voter supported various political parties on the basis of their demographic characteristics. Take a model voter, call her Nancy. Nancy is a 57 year-old white woman; she has a post-graduate degree, lives in the South East, and owns her home. What do we think the probability is that Nancy voted for the Conservatives in 2019? The simplest prediction we could make is to just assume that Nancy is like a random British voter. Approximately 43.6% of British voters voted Conservative, so we could predict that Nancy would vote Conservative with probability 43.6%. But of course Nancy is not a random British voter. She is 57, and we know older voters were more likely to support the Conservatives. So perhaps we should find the prooportion of 57 year-olds who voted Conservative. But Nancy also has a post-graduate degree, and we know more educated voters were less likely to vote Conservative. So now we need to find the proportion of 57 year-olds _with post-graduate degrees_ who voted Conservative. But Nancy is also a woman, so in fact we need the proportion of 57 year-old _women_ with post-graduate degrees who voted Conservative. And so on. As we add more and more of Nancy's characteristics, this becomes increasingly difficult. The largest source of data on British voting behaviour is [the British Election Study](https://britishelectionstudy.com) (BES), which took a survey of about 32,000 people after the 2019 election. 32,000 is obviously a lot of people, but once we start subsetting on demographics, the samples are increasingly small. There are only 63 voters like Nancy in the BES. This becomes even worse for smaller demographic groups (the BES ony has records for two Black voters in Wales). 

So, instead of finding the exact proportion of 57 year-old white women with post-graduate degrees who own their home in the South East that supported the Conservatives, we build a more general model. Say we know that older voters are about 5 percentage-points more likely to suppport the Conservatives than younger voters and those with post-graduate degrees are about 6 percentage-points less likely to support the Conservatives (both entirely made up numbers); we might predict a voter like Nancy was 1 percentage-point less likely to support the Conservatives that the average voter (this is not how the model really works under the hood, but it gives a general idea). Like before, we are exploiting general associations between demographics and voting behaviour to make a prediction for an individual. But unlike before, we don't need to find a sample of voters exactly like Nancy to make our prediction, we just need a more generic sample of British voters. 

### Data

Before we can build a statistical model, we need to have data. I use data from the BES's 2019 post-election wave. I use data on participants' vote and 13 demographic characteristics: ethnicity, religion, sexuality, gender, age, marital status, parental status, education, working status, income, home ownership, urban-rural status, and region. An important aside: the BES only collects data for people in _Great Britain_ (i.e., excluding Northern Ireland). This is because the Northern Irish party system is quite different to the rest of the UK's and for our purposes means we simply cannot predict how a given voter in Northern Ireland would vote. 

Sometimes the variable the BES is more specific than we want for this purpose. For instance, I group all non-Anglican Protestant denominations together instead of having seperate variables for various denominations. In the interests of space, I will not describe all of these choices that I made here, but if you're interested, you can see the full coding process [here](https://github.com/HBJR/british_voter) in the project's GitHub repository. 

We also have to deal with various missing data. Some people do not answer certain questions of the BES so we have to 'impute' (guess) their characteristics. My imputation strategy is simple: if a respondent did not answer a question, then I assume they belong to the most common category for that question. So, for instance, if someone did not provide their ethnicity, we would assume they were white, since this is the most common ethnic category. There are more complicated imputation strategies that could be used, but I opt for simplicity. 

Finally, we need to consider how to construct the "vote" variable. This is seemingly simple but in practice difficult. The BES collected data on voting for 8 parties: Conservative, Labour, Liberal Democrat, SNP, Green, Reform UK, Plaid Cymru, and the UK Independence Party (UKIP). I only consider six of these, omitting Plaid Cymru and UKIP. This is because there are so few voters for these two parties, that modelling them effectively is extremely difficult. So, Plaid Cymru and UKIP voters were dropped, as were people who did not vote, voted for an independent candidate, or voted for a different "Other" party.

### Model Building

I use a logistic regression model. This is a kind of model for modelling categorical data that assumes the log-odds of an outcome is a linear function of the independent variables. In simpler terms, we are trying to model which group a particular observation belongs to as a function of that observation's characteristics. For each variable we have a coefficient, which describes how the probability of the outcome relates on that variable. For instance, in our model, being older is associated with greater support for the Conservatives, so the coefficient on age is positive. Using all of the various characteristics, the model outputs a probability that a given observation belongs to each class (for our purposes, the probability a particular voter voted for the each party). 

In my model, I also include interaction effects. Interaction effects are the product of two terms and allow the relationship between a characteristic X and vote to depend on some other characteristic. For instance, the relationship between religion and vote might be different in Scotland than England; or perhaps age increases support for the Conservatives among white voters more than it increases support for the Conservatives among Black voters. Each of these interactions also has an attached coefficient. Continuing with the example of age and ethnicity; the coefficient on age is still positive. But additionally, the coefficient on the interaction between age and being white is also positive. This makes interpretating more difficult. Continuing with the example of age and the Conservatives; we can no longer just say that "age increases the probability of voting Conservative". The association is different among different groups.

Finally, I employed regression regularization. Regularization is a technique to prevent us "overfitting" to noise in the data. It penalizes having lots of large coefficients, forcing the model to focus on the most important predictors. So, for example, if maritial status doesn't really matter for voting behaviour, the coefficient on it might be shrunk to zero. The model used L2 regularization and was estimated using sklearn's LogisticRegressionCV function to optimize the regularization parameter. 

### Model Performance

One way to evaluate the performance of a logistic regression model is by how accurately it classifies the observations. We classify observations into the group that the model says they are most likely to belong to. So, take Nancy again. Say Nancy really voted for the Conservative party. Let's say that our model gives her a 50% chance of voting Conservative; 25% chance of voting Labour; 15% chance of voting Liberal Democrat; 5% chance of voting Green; 5% chance of voting for Reform UK; and 0% chance of voting SNP. We would correctly classify Nancy as voting Conservative. But take Mary, Nancy's friend who is demographically identically but voted Labour. We classify Mary incorrectly, because the model gives her the highest probability of voting Conservative when she in fact voted Labour. 

So to get the accuracy score, we classify all the observations according to the model. Then we compare each observation's predicted value to its true value and see what percent we got correct. My optimized model get's 55% of these observations correct (for the more astute machine learning observors, this is on the test set, so no need to worry about bias here). 55% sounds quite bad at first, but we need to consider the classification setting. Say you were guessing which party someone voted for, with no information about them. How would you do it? The best classifier here would always guess that someone voted Conservative since this is the most common category (discussion [here](https://towardsdatascience.com/calculating-a-baseline-accuracy-for-a-classification-model-a4b342ceb88f) if you're interested in the maths). This would achieve accuracy of 43.6%. So, our model makes about a 11.5% improvement in accuracy over the baseline case. This still isn't amazing (and speaks to the fact that British voters are not as demographically divided as American ones), but it's not terrible.

Another way to evaluate a classification model is it's F1 scores. F1 scores account for the fact that we can achieve very high accuracy through quite stupid strategies (like guessing that everyone voted Conservative). The obvious problem with this strategy is that it ignores everyone who didn't vote Conservative. How is our model doing at classifying them? The F1 score for a particular class takes the geometric mean of the 'precision' and 'recall' in that class. Precision for class A gives the proportion of observations classified as class A who did in fact belong to class A. Recall for class A gives the proportion of observations which belong to class A that were correctly classified as class A. The macro-average F1 score gives a metric for the whole model, taking the average F1 score across all the classes. The table below shows macro-average F1 score as well as the F1 score for each party. The dummy model proposed above achieves an F1 score of 0.11. Our model achieves 0.30, a substantial improvement. Two things also stand out. First, the classifier is much worse at classifying small parties. To some extent this is fine and expected; only 2.6% of voters supported the Green Party in 2019, so even if some was 10 times as likely to support the Greens as average, their probability of supporting the Greens would still be quite low. Second, the model is particularly good at two parties: the Conservatives and the SNP. The Conservatives make sense: they are the largest party so the model classifies lots of people as Conservative. The SNP is not a large party. It is, however, the largest party in Scotland, so the model can do well by predicting that a lot of Scots support the SNP. 


                               precision    recall  f1-score   support

       Brexit Party/Reform UK       0.00      0.00      0.00       154
                 Conservative       0.58      0.79      0.67      2571
                  Green Party       0.00      0.00      0.00       178
                       Labour       0.51      0.50      0.51      1684
             Liberal Democrat       0.00      0.00      0.00       732
                          SNP       0.49      0.79      0.60       253
                    
                     accuracy                           0.55      5572
                    macro avg       0.26      0.35      0.30      5572
                 weighted avg       0.44      0.55      0.49      5572


### How to Use the Model

Before I discuss the most important demographic predictors, I want to give some brief caveats on using the web app. First, the web app allows you to enter some implausible combinations. For instance, you can ask it to output predicted voting patterns for people who live in rural London or who are 18 year old pensioners. Naturally, these results shouldn't be taken at all seriously. Equally, some very rare combinations (be especially wary of the "other" option in race, religion, etc.) can generate odd results (e.g., a 5% chance that a voter in the South East supported the SNP). All the outputs should be taken with a generous pinch of salt: the model is not infallible and it was generated using limited data. 

## Most Important Predictors of Voting Behaviour

One cool thing you can do with this model is see what demographic characteristics change the predicted probability of party support the most. These associations are obviously not causal effects, but they give a nice idea of the biggest demographic divides in British politics. I calculated them by calculating the model's predicted probabilities for each voter in my sample. Then, I switched one characteristic and calculated new predicted probabilities (i.e., for all non-Anglican voters, we calculate how the model predicts they would have voted if they were Anglican). We can look at how the probabilities changed on average to see the average impact of each characteristic. 

### Conservative

The graph below shows the ten largest predictors of voting for the Conservatives (i.e., on average, they changed the probability of voting for the Conservatives the most). The x-axis shows the change in average predicted probability of supporting the Conservatives. The characteristic that is associated with the biggest increase in predicted support for the Conservatives is being Anglican, which increases the predicted probability of voting Conservative by about 10 percentage-points. Living in Scotland decreases the predicted probability of supporting the Conservatives by about 14 percentage-points. Education is another key predictor. Having no qualifications or having only GCSE equivalent qualifications increases the predicted probability of supporting the Conservatives, while having a post-graduate degree is a key negative predictor. Being Black or Muslim decreases the predicted probability of Conservative support, while being Jewish increases the predicted probability of voting Conservative by about 8 percentage-points. The remaining two predictors are being between 18 and 29 years-old, which decreases predicted Conservative support by about 9 percentage-points, and being LGB+, which decreases predicted Conservative support by about 8 percentage-points. The BES doesn't have data about gender identity, but I imagine the association would be similar (if not stronger).  

![Biggest Predictors of Conservative Vote](/assets/imgs/tory.png)

### Labour 

Now let's consider Labour. As with the Conservatives, the biggest negative predictor of Labour vote is living in Scotland, which decreases the predicted probability of Labour support by about 12 percentage-points. This reflects the relative dominance of the SNP in Scotland, decreasing vote share for both parties. Many of the other predictors of Labour support are simply the inverse of Conservative predictors: being Black or Muslim or having a post-graduate degree or being 18-29 all increase the predicted probability of supporting Labour, while being Jewish decreases the predicted probability of Labour support. Being very high income (greater than £150,000 per year) decreases the predicted probability of Labour support by about 8 percentage-points. Additionally, despite the eulogies for the "Red Wall", living in the North West, North East, or Wales all increase the predicted probability of Labour support.

!["Biggest Predictors of Labour Vote"](/assets/imgs/lab.png)

### Liberal Democrats 

Now the Lib Dems! The changes in predicted probability here are quite a lot smaller, reflecting the Lib Dem's smaller vote shares. Having a post-graduate degree raises the predicted probability of supporting the Lib Dems by about 4.5 percentage points, while having only GCSE or equivalent qualifications decreases the predicted probability by nearly 3 percentage-points. Being relatively affluent (earning £100,000-£149,999 per year) increases the probabilty of Lib Dem support by nearly 4 percentage-points, while living in social housing lowers the model's predicted probability by nearly 3 percentage points. Finally, there are quite associations with region. Living in London or the South East raises the predicted probability of Lib Dem support, while living in the East Midlands, Scotland, or Wales are associated with lower Lib Dem support. Being in a rural area is also associated with higher Lib Dem support.

!["Biggest Predictors of Liberal Democrat Vote"](/assets/imgs/lib.png)

### Green Party

And the Greens. Again, the changes here even smaller, reflecting that most people having a very small chance of voting Green regardless of their demographic characteristics. Living in the South East raises the predicted probability of supporting the Greens, while living in Scotland or Wales decreases the predicted probability. Age matters for the Greens: being older (65+) decreases the predicted probability of Green support while being between 30 and 44 raises the predicted probability. Having GCSE or equivalent qualifications decreases the predicted probability of supporting the Greens, as does being married. Being Anglican lowers the predicted probability, while having no religion increases the probability of Green support. Finally, working part-time is associated with an increased probability of Green support. 

!["Biggest Predictors of Green Vote"](/assets/imgs/green.png)

### Reform UK 

And our final GB-wide party, Reform UK. One important thing to note is that Reform UK did not run in all constituencies in order to help Conservatives win some seats, so to some extent these reflect where Reform ran. Regions are big for Reform UK. Living in Yorkshire, the North East, the North West, or Wales all increase the predicted probability of supporting Reform UK, while living in the South East or South West decrease the predicted probability. Living in rural areas is associated with less support for Reform UK, which I suspect is to do with them no running in Conservative seats. Finally, living in social housing or having GCSE/equivalent qualifications increase the predicted probability of supporting Reform UK

!["Biggest Predictors of Reform UK Vote"](/assets/imgs/reform.png)

### SNP

And finally, the SNP. By far the largest demographic predictor of SNP support is living in Scotland (as you would expect); I've removed all th regional variables from this graph because they are essentially meaningless (you can only vote for the SNP if you live in Scotland). The other factors move predicted SNP support by quite small values. Being Anglican, Black, Mixed Race, Asian, Muslim, Jewish, or having no qualifications decreases predicted support for the SNP. However, only being Anglican decreases support by more than 1 percentag-point. Earning very little (less than £5000 per year) or a lot (£100,000-£149,999 per year) both increase predicted support for the SNP, but both by less than 1 percentage-point. Living in social housing increases the model's predicted probability of SNP support by about 1 percentage-point.

!["Biggest Predictors of SNP Vote"](/assets/imgs/snp.png)

## Conclusion

Overall, I have a few conclusions from this project. First, religion is probably an underrated divide in UK politics. Anglicanism, Judaism, and Islam routinely come up as predictors of vote choice; looking further down at the less important predictors, Catholicism and non-Anglican Protestantism also come up. Second, despite the perception that Labour has lost its traditional areas, living in Labour's old heartlands in the North and Wales are important, positive predictors of voting Labour. Third, and as is already well understood, education supercedes income in importance for predicting vote. Income mostly matters at the extremes (e.g., earning 5x the median salary predicts against Labour support), but education really matters for predicting support for both major parties. Finally, the UK is much less demographically divided than the US. In the original Economist article, some variables move predicted support by more than 50 percentage-points! Nothing in the UK comes close. This is probably good for our politics, even if it does make life harder for those of us who like predicting people's voting behaviour. 

As a final plug to check out the web app, find the link [here](https://web-production-4f82.up.railway.app/). Thanks for reading!
